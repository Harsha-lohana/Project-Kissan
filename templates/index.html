<!DOCTYPE html>
<html lang="hi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Project Kisan</title>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0fdf4;
            color: #2e3b2f;
        }

        header {
            background-color: #2e7d32;
            color: white;
            padding: 1.5rem 2rem;
            text-align: center;
            position: relative;
        }

        header h1 {
            margin: 0;
            font-size: 2rem;
        }

        .lang-switch {
            position: absolute;
            top: 10px;
            right: 20px;
            background: #ffffff33;
            padding: 6px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }

        .container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            padding: 2rem;
        }

        .card {
            background-color: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 128, 0, 0.1);
        }

        .card h2 {
            color: #2e7d32;
        }

        button {
            background-color: #2e7d32;
            color: white;
            border: none;
            padding: 0.8rem;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            margin-top: 1rem;
        }

        .footer {
            text-align: center;
            padding: 1rem;
            background-color: #e8f5e9;
        }
    </style>
</head>

<body>

    <header>
        <h1 id="title">ЁЯМ╛ Project Kisan</h1>
        <p id="subtitle">рд╕реНрдорд╛рд░реНрдЯ рдЦреЗрддреА рд╕рд╣рд╛рдпрдХ тАв Smart Farming Assistant</p>
        <div class="lang-switch" onclick="toggleLanguage()">ЁЯМР рд╣рд┐рдВрджреА / English</div>
    </header>

    <section class="container">
        <div class="card">
            <h2 id="cropTitle">ЁЯМ┐ рдлрд╕рд▓ рдХреА рд╕реНрдерд┐рддрд┐</h2>
            <p id="cropStatus">рд╕реНрдерд┐рддрд┐: <span id="cropHealth">рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ...</span></p>
        </div>

     <div class="card" onclick="window.location.href='/mandi-ui'" style="cursor: pointer;">
    <h2 id="mandiTitle">ЁЯТ╣ рдордВрдбреА рдХреАрдорддреЗрдВ</h2>
    <p id="mandiInfo">рдЯрдорд╛рдЯрд░: <span id="mandiPrice">--</span></p>
</div>

        <div class="card">
            <h2 id="weatherTitle">ЁЯМдя╕П рдореМрд╕рдо</h2>
            <p id="weatherInfo">рдЖрдЬ: --</p>
        </div>
        <div class="card" onclick="window.location.href='/predict_form'" style="cursor: pointer;">
    <h2 id="weatherTitle">ЁЯМ╛ рдлрд╕рд▓ рдкреВрд░реНрд╡рд╛рдиреБрдорд╛рди</h2>
    <p id="weatherInfo">рдХреНрд▓рд┐рдХ рдХрд░рдХреЗ рдкреВрд░реНрд╡рд╛рдиреБрдорд╛рди рджреЗрдЦреЗрдВ</p>
</div>


        <div class="card">
            <h2>ЁЯОЩя╕П <span id="voiceLabel">AI рд╕реЗ рдмрд╛рдд рдХрд░реЗрдВ</span></h2>
            <button onclick="startVoice()">ЁЯОд <span id="speakBtn">рдмреЛрд▓реЗрдВ / Speak</span></button>
        </div>

        <div class="card">
            <h2>ЁЯУЮ <span id="callLabel">рд╣реЗрд▓реНрдкрд▓рд╛рдЗрди</span></h2>
            <button onclick="simulateCall()">ЁЯУЮ <span id="callBtn">рдХреЙрд▓ рдХрд░реЗрдВ / Call</span></button>
        </div>
    </section>

    <div class="footer">
        ┬й 2025 AutoNeura
    </div>

    <!-- Main Logic -->
    <script>
        // Firebase config
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "your-project-id.firebaseapp.com",
            databaseURL: "https://your-project-id-default-rtdb.firebaseio.com",
            projectId: "your-project-id",
            storageBucket: "your-project-id.appspot.com",
            messagingSenderId: "SENDER_ID",
            appId: "APP_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Realtime data from Firebase
        db.ref('kisan/crop_health').on('value', snap => {
            document.getElementById("cropHealth").textContent = snap.val();
        });

        db.ref('kisan/mandi_prices/tomato').on('value', snap => {
            document.getElementById("mandiPrice").textContent = `тВ╣${snap.val()}/kg`;
        });

        db.ref('kisan/weather/today').on('value', snap => {
            document.getElementById("weatherInfo").textContent = snap.val();
        });

        // Voice recognition (native language)
  function startVoice() {
    window.location.href = "/farmer-chat"; 
    // const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    // recognition.lang = currentLang === "hi" ? "hi-IN" : "en-US";
    // recognition.start();

    // recognition.onresult = (event) => {
    //     const transcript = event.results[0][0].transcript;
    //     const message = currentLang === "hi"
    //         ? `рдЖрдкрдиреЗ рдХрд╣рд╛: ${transcript}`
    //         : `You said: ${transcript}`;

    //     speak(message);

    //     // Redirect to index.html after a short delay (e.g., after voice finishes)
    //     setTimeout(() => {
    //         window.location.href = "chat.html";
    //     }, 2500); // Wait for 2.5 seconds (adjust as needed)
    // };
}


        // Voice output
        function speak(message) {
            const synth = window.speechSynthesis;
            const utter = new SpeechSynthesisUtterance(message);
            utter.lang = currentLang === "hi" ? "hi-IN" : "en-US";
            synth.speak(utter);
        }

        function simulateCall() {
            const msg = currentLang === "hi"
                ? "рдХрд┐рд╕рд╛рди рд╣реЗрд▓реНрдкрд▓рд╛рдЗрди рд╕реЗ рдЬреБрдбрд╝ рд░рд╣реЗ рд╣реИрдВ, рдХреГрдкрдпрд╛ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВред"
                : "Connecting to Kisan helpline. Please wait.";
            speak(msg);
        }

        // Language switch
        let currentLang = "hi";
        function toggleLanguage() {
            currentLang = currentLang === "hi" ? "en" : "hi";

            document.getElementById("title").innerText = currentLang === "hi" ? "ЁЯМ╛ Project Kisan" : "ЁЯМ╛ Project Kisan";
            document.getElementById("subtitle").innerText = currentLang === "hi" ? "рд╕реНрдорд╛рд░реНрдЯ рдЦреЗрддреА рд╕рд╣рд╛рдпрдХ тАв Smart Farming Assistant" : "Smart Farming Assistant тАв рд╕реНрдорд╛рд░реНрдЯ рдЦреЗрддреА рд╕рд╣рд╛рдпрдХ";

            document.getElementById("cropTitle").innerText = currentLang === "hi" ? "ЁЯМ┐ рдлрд╕рд▓ рдХреА рд╕реНрдерд┐рддрд┐" : "ЁЯМ┐ Crop Health";
            document.getElementById("cropStatus").innerText = currentLang === "hi" ? "рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ..." : "Loading..";
            document.getElementById("mandiTitle").innerText = currentLang === "hi" ? "ЁЯТ╣ рдордВрдбреА рдХреАрдорддреЗрдВ" : "ЁЯТ╣ Mandi Prices";
            document.getElementById("mandiInfo").innerText = currentLang === "hi" ? "рдЯрдорд╛рдЯрд░: " : "Tomato:--";
            document.getElementById("weatherTitle").innerText = currentLang === "hi" ? "ЁЯМдя╕П рдореМрд╕рдо" : "ЁЯМдя╕П Weather";
            document.getElementById("weatherInfo").innerText = currentLang === "hi" ? "рдЖрдЬ: --" : "Today:--";

            document.getElementById("voiceLabel").innerText = currentLang === "hi" ? "AI рд╕реЗ рдмрд╛рдд рдХрд░реЗрдВ" : "Talk to AI";
            document.getElementById("speakBtn").innerText = currentLang === "hi" ? "рдмреЛрд▓реЗрдВ / Speak" : "Speak";

            document.getElementById("callLabel").innerText = currentLang === "hi" ? "рд╣реЗрд▓реНрдкрд▓рд╛рдЗрди" : "Helpline";
            document.getElementById("callBtn").innerText = currentLang === "hi" ? "рдХреЙрд▓ рдХрд░реЗрдВ / Call" : "Call";
        }
    </script>

</body>

</html>